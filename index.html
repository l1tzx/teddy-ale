<!DOCTYPE html>
<html lang="es-MX">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>OMGL1TZX â€” MÃ©xico Quest ğŸğŸ‡²ğŸ‡½</title>
  <style>
    :root{
      --bg:#06060c;
      --card: rgba(255,255,255,.085);
      --border: rgba(255,255,255,.14);
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.68);
      --pink:#ff4d88;
      --cyan:#22d3ee;
      --purple:#8b5cf6;
      --shadow: 0 18px 60px rgba(0,0,0,.48);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100vh;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      background:
        radial-gradient(900px 500px at 15% 12%, rgba(255,77,136,.25), transparent 55%),
        radial-gradient(900px 500px at 85% 18%, rgba(34,211,238,.16), transparent 60%),
        radial-gradient(900px 700px at 50% 92%, rgba(139,92,246,.15), transparent 60%),
        var(--bg);
      overflow-x:hidden;
    }

    .gridbg{
      position:fixed; inset:0; pointer-events:none; opacity:.42;
      background-image:
        linear-gradient(rgba(255,255,255,.04) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255,255,255,.04) 1px, transparent 1px);
      background-size: 52px 52px;
      mask-image: radial-gradient(circle at 50% 25%, rgba(0,0,0,1) 12%, rgba(0,0,0,0) 62%);
      animation: drift 10s linear infinite;
    }
    @keyframes drift { to { transform: translate3d(52px,52px,0); } }

    /* background slang words */
    .slang{
      position:fixed; inset:0; pointer-events:none; opacity:.23; z-index:0;
      overflow:hidden;
    }
    .slang span{
      position:absolute;
      font-weight:900;
      letter-spacing:.8px;
      color: rgba(255,255,255,.35);
      text-transform: uppercase;
      animation: floatWords linear infinite;
      filter: drop-shadow(0 18px 30px rgba(0,0,0,.55));
      user-select:none;
      white-space:nowrap;
    }
    @keyframes floatWords{
      0%{ transform: translateY(110vh) translateX(0) rotate(-2deg); opacity:0; }
      15%{ opacity:1; }
      100%{ transform: translateY(-20vh) translateX(60px) rotate(2deg); opacity:0; }
    }

    /* top corner name */
    .corner{
      position: fixed; top: 12px; left: 12px; z-index: 50;
      display:flex; align-items:center; gap:10px;
      padding: 10px 12px;
      border-radius: 999px;
      border:1px solid var(--border);
      background: rgba(0,0,0,.35);
      backdrop-filter: blur(10px);
      box-shadow: 0 12px 40px rgba(0,0,0,.35);
      font-weight: 900;
      letter-spacing:.6px;
    }
    .corner .dot{
      width:10px; height:10px; border-radius:999px;
      background: linear-gradient(135deg,var(--pink),var(--cyan));
      box-shadow: 0 0 18px rgba(255,77,136,.45);
      animation:pulse 1.4s ease-in-out infinite;
    }
    @keyframes pulse { 50%{ transform:scale(1.35); opacity:1 } }

    .wrap{
      width:min(1080px, 92vw);
      margin:0 auto;
      padding:62px 0 46px;
      position:relative;
      z-index:1;
      text-align:center;
    }

    .badge{
      display:inline-flex; gap:10px; align-items:center;
      padding:10px 14px; border-radius:999px;
      border:1px solid var(--border); background:rgba(255,255,255,.06);
      backdrop-filter: blur(10px);
      color:var(--muted); font-size:14px;
    }

    h1{ margin:18px 0 6px; font-size: clamp(34px,5.8vw,72px); letter-spacing:-1px; }
    .sub{ margin:0 0 16px; color:var(--muted); font-size: clamp(14px,2.2vw,18px); }

    .viva{
      margin: 10px auto 16px;
      width: fit-content;
      padding: 10px 14px;
      border-radius: 14px;
      background: linear-gradient(135deg, rgba(34,211,238,.18), rgba(255,77,136,.18));
      border: 1px solid rgba(255,255,255,.14);
      box-shadow: 0 14px 40px rgba(0,0,0,.35);
      font-weight: 900;
      text-transform: uppercase;
      letter-spacing: .9px;
      animation: pop 1.9s ease-in-out infinite;
    }
    @keyframes pop{ 0%,100%{ transform: translateY(0); } 50%{ transform: translateY(-3px) scale(1.02);} }

    .panel{
      margin: 0 auto;
      width:min(980px, 100%);
      border:1px solid var(--border);
      background: var(--card);
      border-radius:18px;
      padding: 16px;
      text-align:left;
      backdrop-filter: blur(12px);
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }
    .panel:before{
      content:"";
      position:absolute; inset:-2px; pointer-events:none; opacity:.9;
      background:
        radial-gradient(520px 140px at 20% 0%, rgba(255,77,136,.23), transparent 55%),
        radial-gradient(520px 140px at 85% 0%, rgba(34,211,238,.16), transparent 55%);
    }
    .panel > *{ position:relative; }

    .row{
      display:flex; flex-wrap:wrap; gap:10px; justify-content:center; margin: 10px 0 12px;
    }
    .btn{
      border:none; cursor:pointer; user-select:none;
      padding: 11px 13px;
      border-radius: 14px;
      font-weight: 900;
      font-size: 13px;
      transition: transform .12s ease, opacity .12s ease;
    }
    .btn:active{ transform:scale(.98) }
    .btnA{ background: linear-gradient(135deg, var(--pink), #ff7fb3); color:white; }
    .btnB{ background: rgba(255,255,255,.07); border:1px solid var(--border); color:var(--text); }
    .btnC{ background: linear-gradient(135deg, var(--purple), var(--cyan)); color:#061018; }

    .quest{
      display:grid; gap:12px; margin-top: 8px;
      grid-template-columns: 1fr;
    }
    @media(min-width:920px){ .quest{ grid-template-columns: 1.1fr .9fr; } }

    .card{
      border:1px solid var(--border);
      background: rgba(0,0,0,.14);
      border-radius: 16px;
      padding: 14px;
      overflow:hidden;
      position:relative;
    }
    .card h3{ margin:0 0 6px; }
    .mini{ color:var(--muted); font-size:13px; line-height:1.4; }

    /* Meme card */
    .memeBox{
      display:flex; gap:12px; align-items:center; justify-content:space-between; flex-wrap:wrap;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      padding: 12px;
      border-radius: 14px;
      margin-top: 10px;
    }
    .memeArt{
      flex: 1 1 280px;
      min-height: 120px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.12);
      background:
        radial-gradient(380px 120px at 20% 30%, rgba(34,211,238,.18), transparent 60%),
        radial-gradient(380px 120px at 80% 30%, rgba(255,77,136,.18), transparent 60%),
        rgba(0,0,0,.18);
      display:flex; align-items:center; justify-content:center;
      font-size: 56px;
      position:relative;
      overflow:hidden;
      cursor:pointer;
      transition: transform .12s ease;
    }
    .memeArt:active{ transform: scale(.98); }
    .memeArt:after{
      content:"PICA AQUÃ";
      position:absolute;
      bottom: 10px; right: 12px;
      font-weight: 900;
      letter-spacing: 1px;
      font-size: 12px;
      color: rgba(255,255,255,.7);
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.28);
      backdrop-filter: blur(10px);
    }
    .memeText{
      flex: 1 1 260px;
      font-weight: 900;
      font-size: 14px;
      line-height: 1.35;
    }
    .memeText .tiny{ display:block; margin-top:6px; font-weight:700; color: rgba(255,255,255,.68); }

    /* Snake game box */
    canvas{
      width:100%;
      height: 360px;
      background: rgba(0,0,0,.18);
      border:2px solid rgba(255,255,255,.2);
      border-radius:16px;
      display:block;
    }
    .stats{
      display:flex; gap:10px; flex-wrap:wrap; margin-top:10px;
    }
    .stat{
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.14);
      border-radius: 14px;
      padding: 10px 12px;
      font-size: 13px;
      color: var(--muted);
    }
    .stat b{ color: var(--text); }

    /* Music */
    .musicBox{
      margin-top: 12px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.14);
      border-radius: 16px;
      padding: 12px;
    }
    .ytWrap{
      position: relative;
      width: 100%;
      padding-top: 56.25%;
      border-radius: 14px;
      overflow:hidden;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.05);
      margin-top: 10px;
    }
    .ytWrap iframe{ position:absolute; inset:0; width:100%; height:100%; border:0; }

    /* Toast */
    .toast{
      position:fixed;
      left:50%; bottom:20px;
      transform:translateX(-50%) translateY(22px);
      background:rgba(0,0,0,.55);
      border:1px solid rgba(255,255,255,.14);
      color:rgba(255,255,255,.92);
      padding:10px 14px;
      border-radius:999px;
      backdrop-filter: blur(10px);
      opacity:0;
      transition:.2s ease;
      pointer-events:none;
      font-size:14px;
      box-shadow: 0 20px 70px rgba(0,0,0,.55);
      z-index: 80;
    }
    .toast.show{ opacity:1; transform:translateX(-50%) translateY(0); }

    /* Confetti */
    .fx{ position:fixed; inset:0; pointer-events:none; overflow:hidden; display:none; z-index:60; }
    .fx.show{ display:block; }
    .fx i{
      position:absolute;
      width: 9px; height: 14px;
      border-radius: 3px;
      top:-20px;
      opacity:.95;
      animation: fall linear forwards;
    }
    @keyframes fall{ to{ transform: translateY(110vh) rotate(540deg); opacity:0.9; } }

    /* Secret image modal */
    #secretModal{
      position:fixed; inset:0;
      background: rgba(0,0,0,.7);
      display:none;
      align-items:center;
      justify-content:center;
      z-index: 90;
      backdrop-filter: blur(8px);
    }
    #secretModal.show{ display:flex; }
    #secretModal .box{
      width:min(520px, 92vw);
      border:1px solid rgba(255,255,255,.16);
      background: rgba(0,0,0,.35);
      border-radius: 16px;
      padding: 12px;
      text-align:center;
      box-shadow: 0 30px 120px rgba(0,0,0,.7);
    }
    #secretModal img{
      width:100%;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.14);
      display:block;
    }
    #secretModal .cap{
      margin-top:10px;
      font-weight:900;
      color: rgba(255,255,255,.86);
    }

    /* Hidden â€œhotspotâ€ */
    .secretHotspot{
      position:absolute;
      width: 18px; height: 18px;
      right: 10px; top: 10px;
      opacity: 0.02; /* basically invisible */
      cursor: pointer;
      border-radius: 999px;
      background: white;
    }

    footer{ margin-top:16px; color:rgba(255,255,255,.55); font-size:13px; text-align:center; }
  </style>
</head>
<body>
  <div class="gridbg" aria-hidden="true"></div>
  <div class="slang" id="slang" aria-hidden="true"></div>

  <div class="fx" id="fx" aria-hidden="true"></div>
  <div class="toast" id="toast">Listo âœ…</div>

  <div class="corner"><span class="dot"></span> OMGL1TZX</div>

  <!-- Secret Modal -->
  <div id="secretModal" onclick="this.classList.remove('show')">
    <div class="box" onclick="event.stopPropagation()">
      <img src="assets/secret.jpg" alt="secret">
      <div class="cap">Encontraste el secreto ğŸ˜›ğŸ‡²ğŸ‡½</div>
      <div class="mini" style="text-align:center;margin-top:6px;">(clic afuera para cerrar)</div>
    </div>
  </div>

  <main class="wrap" id="wrap">
    <div class="badge"><span class="dot" style="width:10px;height:10px;border-radius:999px;background:linear-gradient(135deg,var(--pink),var(--cyan));"></span> MÃ©xico Quest: cotorreo + snake ğŸ</div>
    <h1>MÃ©xico Quest ğŸ‡²ğŸ‡½</h1>
    <p class="sub">Pica cosas â†’ salen mensajes â†’ confetti â†’ y el snake se pone mÃ¡s cabrÃ³n ğŸ˜ˆ</p>
    <div class="viva">VIVA MÃ‰XICO</div>

    <section class="panel" style="position:relative;">
      <!-- Hidden hotspot (top-right of panel) -->
      <div class="secretHotspot" id="secretHotspot" title="ğŸ‘€"></div>

      <div class="row">
        <button class="btn btnA" id="btnLoot">Abrir loot ğŸ</button>
        <button class="btn btnB" id="btnMsg">Mensaje random ğŸ’¬</button>
        <button class="btn btnC" id="btnBoom">Confetti ğŸ‰</button>
      </div>

      <div class="quest">
        <div class="card">
          <h3>ğŸ“¸ Meme MÃ©xico</h3>
          <div class="mini">PÃ­cale al meme para cambiarlo. Y hay un secreto escondido en esta pÃ¡gina ğŸ‘€</div>

          <div class="memeBox">
            <div class="memeArt" id="memeArt">ğŸ‡²ğŸ‡½ğŸ˜‚</div>
            <div class="memeText" id="memeText">
              â€œCuando dices <b>â€˜ahoritaâ€™</b>â€¦ y se convierte en maÃ±anaâ€ ğŸ˜­
              <span class="tiny">PÃ­cale para que cambie y suelte frases.</span>
            </div>
          </div>

          <div class="mini" style="margin-top:10px;">
            Frases de fondo tipo MÃ©xico: <b>â€œNO MAMESâ€</b>, <b>â€œQUE PEDOâ€</b>, <b>â€œNI MODOâ€</b>â€¦ (se mueven solas) ğŸ˜›
          </div>
        </div>

        <div class="card">
          <h3>ğŸ Snake en Caja (muere si toca pared)</h3>
          <div class="mini">Flechas (â†‘ â†“ â† â†’). Come cajitas ğŸ“¦. Creces. Si tocas la pared = ğŸ’€</div>

          <canvas id="snake" width="900" height="360"></canvas>

          <div class="stats">
            <div class="stat">Puntos: <b id="score">0</b></div>
            <div class="stat">RÃ©cord: <b id="best">0</b></div>
            <div class="stat">Estado: <b id="state">listo</b></div>
          </div>

          <div class="row" style="justify-content:flex-start;">
            <button class="btn btnC" id="playSnake">Jugar â–¶</button>
            <button class="btn btnB" id="resetSnake">Reiniciar âŸ²</button>
          </div>

          <div class="musicBox">
            <div class="mini"><b>MÃºsica:</b> Grupo Frontera, Fuerza Regida â€” COQUETA (Letra Oficial)</div>
            <div class="mini">Si el navegador bloquea autoplay, dale play manual.</div>
            <div class="ytWrap">
              <iframe
                src="https://www.youtube.com/embed/nNUiVCKu_9Y?autoplay=0&mute=0&controls=1&rel=0"
                title="COQUETA - Grupo Frontera, Fuerza Regida"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                allowfullscreen>
              </iframe>
            </div>
          </div>

        </div>
      </div>
    </section>

    <footer>
      Hecho por <b>OMGL1TZX</b> â€” viva MÃ©xico ğŸ˜›ğŸ‡²ğŸ‡½
    </footer>
  </main>

  <script>
    // Slang background
    const slangWords = [
      "NO MAMES","AHORITA","ALV","WEY","CHIDO","QUE PEDO",
      "SIMÃ“N","NEL","A LA VERGA","TIRA PARO","YA MERITO",
      "PURO COTORREO","TA' CABRÃ“N","NI MODO","YA VALIÃ“"
    ];
    const slang = document.getElementById("slang");
    for(let i=0;i<26;i++){
      const sp = document.createElement("span");
      sp.textContent = slangWords[Math.floor(Math.random()*slangWords.length)];
      sp.style.left = (Math.random()*100) + "vw";
      sp.style.animationDuration = (7 + Math.random()*12) + "s";
      sp.style.animationDelay = (Math.random()*8) + "s";
      sp.style.fontSize = (12 + Math.random()*22) + "px";
      slang.appendChild(sp);
    }

    // Toast
    const toast = document.getElementById("toast");
    function showToast(msg){
      toast.textContent = msg;
      toast.classList.add("show");
      setTimeout(()=>toast.classList.remove("show"), 1400);
    }

    // Confetti
    const fx = document.getElementById("fx");
    function confetti(){
      fx.classList.add("show");
      fx.innerHTML = "";
      const colors = [
        "rgba(255,77,136,.95)",
        "rgba(34,211,238,.95)",
        "rgba(139,92,246,.95)",
        "rgba(255,255,255,.85)",
        "rgba(255,190,11,.9)"
      ];
      for(let i=0;i<130;i++){
        const c = document.createElement("i");
        c.style.left = (Math.random()*100) + "vw";
        c.style.background = colors[Math.floor(Math.random()*colors.length)];
        c.style.animationDuration = (1.7 + Math.random()*1.8) + "s";
        c.style.animationDelay = (Math.random()*0.12) + "s";
        fx.appendChild(c);
      }
      setTimeout(()=>{ fx.classList.remove("show"); fx.innerHTML=""; }, 2400);
    }

    // Buttons
    const lootItems = ["ğŸŒ® Taco legendario","ğŸ©´ Chancla +10 respeto","ğŸ§ƒ Agua fresca","ğŸ˜ˆ Indirecta Ã©pica","ğŸ¤¡ Payasada rara"];
    const msgs = [
      "Â¿QuÃ© pedo wey? ğŸ˜›",
      "Ahoritaâ€¦ (mentira) ğŸ˜­",
      "No mames quÃ© chido ğŸ”¥",
      "Ni modo, asÃ­ es ğŸ˜‚",
      "Viva MÃ©xico cabrones ğŸ‡²ğŸ‡½"
    ];
    document.getElementById("btnLoot").onclick = ()=>{ showToast("Loot: " + lootItems[Math.floor(Math.random()*lootItems.length)]); confetti(); };
    document.getElementById("btnMsg").onclick  = ()=>{ showToast(msgs[Math.floor(Math.random()*msgs.length)]); };
    document.getElementById("btnBoom").onclick = ()=>{ showToast("ğŸ‰ VIVA MÃ‰XICO"); confetti(); };

    // Meme click
    const memeArt = document.getElementById("memeArt");
    const memeText = document.getElementById("memeText");
    const memeFaces = ["ğŸ‡²ğŸ‡½ğŸ˜‚","ğŸ©´ğŸ’€","ğŸŒ®ğŸ˜ˆ","ğŸ§ƒğŸ˜›","ğŸ”¥ğŸ‡²ğŸ‡½","ğŸ¤ ğŸ‡²ğŸ‡½"];
    const memeLines = [
      "â€œCuando dices <b>â€˜ahoritaâ€™</b>â€¦ y se convierte en maÃ±anaâ€ ğŸ˜­",
      "â€œYo no fuiâ€¦ (sÃ­ fui)â€ ğŸ¤¡",
      "â€œNo mames, quÃ© calorâ€ ğŸ¥µ",
      "â€œTira paro y comparteâ€ ğŸ˜ˆ",
      "â€œNi modoâ€¦ pero con estiloâ€ ğŸ˜›"
    ];
    memeArt.onclick = ()=>{
      memeArt.textContent = memeFaces[Math.floor(Math.random()*memeFaces.length)];
      memeText.innerHTML = memeLines[Math.floor(Math.random()*memeLines.length)] + '<span class="tiny">Sigue picÃ¡ndole ğŸ˜­</span>';
      showToast("Meme cambiado ğŸ˜­");
    };

    // Secret hotspot shows hidden image
    document.getElementById("secretHotspot").onclick = ()=>{
      document.getElementById("secretModal").classList.add("show");
      showToast("Encontraste el secreto ğŸ‘€");
      confetti();
    };

    // -------- Snake in a Box (dies on walls) --------
    const canvas = document.getElementById("snake");
    const ctx = canvas.getContext("2d");

    const cell = 18;
    const cols = Math.floor(canvas.width / cell);
    const rows = Math.floor(canvas.height / cell);

    let running = false;
    let dir = {x:1,y:0};
    let nextDir = {x:1,y:0};
    let snake = [];
    let boxFood = {x:10,y:10};
    let score = 0;
    let best = Number(localStorage.getItem("best_boxsnake") || 0);
    document.getElementById("best").textContent = best;

    function newFood(){
      let f;
      while(true){
        f = {x: Math.floor(Math.random()*cols), y: Math.floor(Math.random()*rows)};
        if(!snake.some(s=>s.x===f.x && s.y===f.y)) break;
      }
      boxFood = f;
    }

    function resetSnake(){
      running = false;
      score = 0;
      snake = [
        {x: Math.floor(cols/2), y: Math.floor(rows/2)},
        {x: Math.floor(cols/2)-1, y: Math.floor(rows/2)},
        {x: Math.floor(cols/2)-2, y: Math.floor(rows/2)}
      ];
      dir = {x:1,y:0};
      nextDir = {x:1,y:0};
      newFood();
      document.getElementById("score").textContent = score;
      document.getElementById("state").textContent = "listo";
      draw();
    }

    function draw(){
      ctx.clearRect(0,0,canvas.width,canvas.height);

      // background
      ctx.fillStyle = "rgba(0,0,0,.20)";
      ctx.fillRect(0,0,canvas.width,canvas.height);

      // border glow box
      ctx.strokeStyle = "rgba(255,255,255,.25)";
      ctx.lineWidth = 3;
      ctx.strokeRect(2,2,canvas.width-4,canvas.height-4);

      // food box ğŸ“¦
      const fx = boxFood.x*cell;
      const fy = boxFood.y*cell;
      ctx.fillStyle = "rgba(255,190,11,.95)";
      ctx.fillRect(fx+2, fy+2, cell-4, cell-4);
      ctx.fillStyle = "rgba(0,0,0,.35)";
      ctx.fillRect(fx+6, fy+6, cell-12, cell-12);
      ctx.fillStyle = "rgba(255,255,255,.85)";
      ctx.font = "14px system-ui";
      ctx.fillText("ğŸ“¦", fx+1, fy+16);

      // snake
      for(let i=0;i<snake.length;i++){
        const s = snake[i];
        ctx.fillStyle = (i===0) ? "rgba(34,211,238,.95)" : "rgba(139,92,246,.85)";
        ctx.fillRect(s.x*cell+1, s.y*cell+1, cell-2, cell-2);
      }

      ctx.fillStyle = "rgba(255,255,255,.55)";
      ctx.font = "14px system-ui";
      ctx.fillText("Flechas = mover. Come ğŸ“¦. Toca pared = ğŸ’€", 14, 22);
    }

    function gameOver(){
      running = false;
      document.getElementById("state").textContent = "perdiste ğŸ’€";
      showToast("Te matÃ³ la pared ğŸ˜­");
      if(score > best){
        best = score;
        localStorage.setItem("best_boxsnake", String(best));
        document.getElementById("best").textContent = best;
        confetti();
        showToast("Nuevo rÃ©cord ğŸ”¥");
      }
    }

    function step(){
      if(!running) return;

      dir = nextDir;
      const head = snake[0];
      const newHead = {x: head.x + dir.x, y: head.y + dir.y};

      // DIE if touching walls (the box border)
      if(newHead.x < 0 || newHead.y < 0 || newHead.x >= cols || newHead.y >= rows){
        gameOver(); return;
      }
      // self hit
      if(snake.some(s=>s.x===newHead.x && s.y===newHead.y)){
        gameOver(); return;
      }

      snake.unshift(newHead);

      // eat box -> grow (do not pop)
      if(newHead.x === boxFood.x && newHead.y === boxFood.y){
        score += 1;
        document.getElementById("score").textContent = score;
        showToast("ğŸ“¦ +1  (creciste)");
        if(score % 5 === 0){ confetti(); showToast("Racha ğŸ”¥"); }
        newFood();
      } else {
        snake.pop();
      }

      draw();

      // speed increases (fun)
      const speed = Math.max(55, 140 - score*5);
      setTimeout(step, speed);
    }

    window.addEventListener("keydown", (e)=>{
      const k = e.key;
      if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(k)) e.preventDefault();

      // prevent reversing
      if(k==="ArrowUp" && dir.y!==1) nextDir = {x:0,y:-1};
      if(k==="ArrowDown" && dir.y!==-1) nextDir = {x:0,y:1};
      if(k==="ArrowLeft" && dir.x!==1) nextDir = {x:-1,y:0};
      if(k==="ArrowRight" && dir.x!==-1) nextDir = {x:1,y:0};
    }, {passive:false});

    document.getElementById("playSnake").onclick = ()=>{
      if(running) return;
      running = true;
      document.getElementById("state").textContent = "jugando";
      showToast("A darle ğŸğŸ“¦");
      step();
    };
    document.getElementById("resetSnake").onclick = ()=>{ resetSnake(); showToast("Reiniciado âŸ²"); };

    resetSnake();
  </script>
</body>
</html>
