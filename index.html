<!DOCTYPE html>
<html lang="es-MX">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Preguntas Mexas â€” L1TZX ğŸ˜›</title>
  <style>
    :root{
      --bg:#07070d;
      --card: rgba(255,255,255,.085);
      --border: rgba(255,255,255,.14);
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.68);
      --pink:#ff4d88;
      --pink2:#ff7fb3;
      --cyan:#22d3ee;
      --purple:#8b5cf6;
      --shadow: 0 18px 60px rgba(0,0,0,.48);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100vh;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      background:
        radial-gradient(900px 500px at 15% 12%, rgba(255,77,136,.25), transparent 55%),
        radial-gradient(900px 500px at 85% 18%, rgba(34,211,238,.16), transparent 60%),
        radial-gradient(900px 700px at 50% 92%, rgba(139,92,246,.15), transparent 60%),
        var(--bg);
      overflow-x:hidden;
    }
    .gridbg{
      position:fixed; inset:0; pointer-events:none; opacity:.45;
      background-image:
        linear-gradient(rgba(255,255,255,.04) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255,255,255,.04) 1px, transparent 1px);
      background-size: 52px 52px;
      mask-image: radial-gradient(circle at 50% 25%, rgba(0,0,0,1) 10%, rgba(0,0,0,0) 62%);
      animation: drift 10s linear infinite;
    }
    @keyframes drift { to { transform: translate3d(52px,52px,0); } }

    .float-layer{ position:fixed; inset:0; pointer-events:none; opacity:.6; filter:drop-shadow(0 10px 16px rgba(0,0,0,.55)); }
    .float{ position:absolute; transform: translateY(110vh); user-select:none; animation: floatUp linear infinite; }
    @keyframes floatUp{
      0%{ transform: translateY(110vh) translateX(0) scale(.9); opacity:0; }
      12%{ opacity:1; }
      100%{ transform: translateY(-15vh) translateX(40px) scale(1.2); opacity:0; }
    }

    /* Top corner tag */
    .corner{
      position: fixed;
      top: 12px; left: 12px;
      z-index: 50;
      display:flex; align-items:center; gap:10px;
      padding: 10px 12px;
      border-radius: 999px;
      border:1px solid var(--border);
      background: rgba(0,0,0,.35);
      backdrop-filter: blur(10px);
      box-shadow: 0 12px 40px rgba(0,0,0,.35);
      font-weight: 900;
      letter-spacing:.5px;
    }
    .corner .dot{
      width:10px; height:10px; border-radius:999px;
      background: linear-gradient(135deg,var(--pink),var(--cyan));
      box-shadow: 0 0 18px rgba(255,77,136,.45);
      animation:pulse 1.4s ease-in-out infinite;
    }
    @keyframes pulse { 50%{ transform:scale(1.35); opacity:1 } }

    .wrap{ width:min(1060px, 92vw); margin:0 auto; padding:62px 0 46px; text-align:center; position:relative; }

    .badge{
      display:inline-flex; gap:10px; align-items:center;
      padding:10px 14px; border-radius:999px;
      border:1px solid var(--border); background:rgba(255,255,255,.06);
      backdrop-filter: blur(10px);
      color:var(--muted); font-size:14px;
    }
    h1{ margin:18px 0 6px; font-size: clamp(34px,5.8vw,70px); letter-spacing:-1px; }
    .sub{ margin:0 0 16px; color:var(--muted); font-size: clamp(14px,2.2vw,18px); }

    .mexico{
      margin: 10px auto 18px;
      width: fit-content;
      padding: 10px 14px;
      border-radius: 14px;
      background: linear-gradient(135deg, rgba(34,211,238,.18), rgba(255,77,136,.18));
      border: 1px solid rgba(255,255,255,.14);
      box-shadow: 0 14px 40px rgba(0,0,0,.35);
      font-weight: 900;
      text-transform: uppercase;
      letter-spacing: .8px;
      animation: pop 1.9s ease-in-out infinite;
    }
    @keyframes pop{
      0%,100%{ transform: translateY(0); }
      50%{ transform: translateY(-3px) scale(1.02); }
    }

    .tabs{ display:flex; gap:10px; justify-content:center; flex-wrap:wrap; margin: 14px 0 18px; }
    .tabbtn{
      border:none; cursor:pointer; user-select:none;
      padding:12px 14px; border-radius:14px;
      font-weight: 900; font-size: 14px;
      transition: transform .12s ease, opacity .12s ease;
      border:1px solid var(--border);
      background: rgba(255,255,255,.06);
      color: var(--text);
    }
    .tabbtn:active{ transform: scale(.98); }
    .tabbtn.active{
      background: linear-gradient(135deg, var(--pink), var(--pink2));
      border-color: rgba(255,77,136,.35);
    }

    .panel{
      margin: 0 auto;
      width:min(980px, 100%);
      border:1px solid var(--border);
      background: var(--card);
      border-radius:18px;
      padding: 16px;
      text-align:left;
      backdrop-filter: blur(12px);
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }
    .panel:before{
      content:"";
      position:absolute; inset:-2px; pointer-events:none; opacity:.9;
      background:
        radial-gradient(520px 140px at 20% 0%, rgba(255,77,136,.23), transparent 55%),
        radial-gradient(520px 140px at 85% 0%, rgba(34,211,238,.16), transparent 55%);
    }
    .panel > *{ position:relative; }

    .toolsRow{
      display:flex; gap:10px; flex-wrap:wrap; align-items:center; justify-content:space-between;
      margin-bottom: 10px;
    }
    .mini{ color:var(--muted); font-size:13px; }
    .btn{
      border:none; cursor:pointer; user-select:none;
      padding: 10px 12px;
      border-radius: 12px;
      font-weight: 900;
      font-size: 13px;
      transition: transform .12s ease, opacity .12s ease;
    }
    .btn:active{ transform: scale(.98); }
    .btnPrimary{ background: linear-gradient(135deg, var(--purple), var(--cyan)); color:#061018; }
    .btnGhost{ background: rgba(255,255,255,.07); border:1px solid var(--border); color: var(--text); }

    .qgrid{
      display:grid;
      grid-template-columns: 1fr;
      gap: 12px;
      margin-top: 10px;
    }
    @media (min-width: 900px){
      .qgrid{ grid-template-columns: 1fr 1fr; }
    }
    .qcard{
      border:1px solid var(--border);
      background: rgba(0,0,0,.14);
      border-radius: 16px;
      padding: 14px;
      position:relative;
      overflow:hidden;
      transition: transform .12s ease, border-color .12s ease;
    }
    .qcard:hover{
      transform: translateY(-2px);
      border-color: rgba(255,255,255,.22);
    }
    .qtitle{
      font-weight: 900;
      margin-bottom: 10px;
      line-height: 1.35;
    }
    textarea{
      width: 100%;
      min-height: 76px;
      resize: vertical;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.05);
      color: var(--text);
      outline: none;
      font-size: 14px;
      line-height: 1.45;
    }
    textarea::placeholder{ color: rgba(255,255,255,.48); }

    .qactions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top: 10px;
      justify-content:flex-end;
    }

    /* Confetti */
    .confetti{ position:fixed; inset:0; pointer-events:none; overflow:hidden; display:none; z-index:60; }
    .confetti.show{ display:block; }
    .confetti i{
      position:absolute;
      width: 9px; height: 14px;
      border-radius: 3px;
      top:-20px;
      opacity:.95;
      animation: confettiFall linear forwards;
    }
    @keyframes confettiFall{ to{ transform: translateY(110vh) rotate(540deg); opacity:0.9; } }

    /* Toast */
    .toast{
      position:fixed;
      left:50%; bottom:20px;
      transform:translateX(-50%) translateY(22px);
      background:rgba(0,0,0,.55);
      border:1px solid rgba(255,255,255,.14);
      color:rgba(255,255,255,.92);
      padding:10px 14px;
      border-radius:999px;
      backdrop-filter: blur(10px);
      opacity:0;
      transition:.2s ease;
      pointer-events:none;
      font-size:14px;
      box-shadow: 0 20px 70px rgba(0,0,0,.55);
      z-index: 80;
    }
    .toast.show{ opacity:1; transform:translateX(-50%) translateY(0); }

    /* Mini game */
    .gameWrap{ margin-top:16px; display:grid; gap:12px; }
    .gameHeader{ display:flex; flex-wrap:wrap; gap:10px; align-items:center; justify-content:space-between; }
    .stats{ display:flex; gap:10px; flex-wrap:wrap; }
    .stat{
      border:1px solid var(--border);
      background:rgba(0,0,0,.14);
      border-radius:14px;
      padding:10px 12px;
      font-size:13px;
      color:var(--muted);
    }
    .stat b{ color:var(--text); }
    canvas{
      width:100%;
      height: 360px;
      background: rgba(0,0,0,.18);
      border:1px solid var(--border);
      border-radius:16px;
      display:block;
    }

    /* Music (YouTube) */
    .musicBox{
      margin-top: 14px;
      border: 1px solid var(--border);
      background: rgba(0,0,0,.14);
      border-radius: 16px;
      padding: 12px;
    }
    .musicRow{
      display:flex; flex-wrap:wrap; gap:10px; align-items:center; justify-content:space-between;
      margin-bottom: 10px;
    }
    .ytWrap{
      position: relative;
      width: 100%;
      padding-top: 56.25%;
      border-radius: 14px;
      overflow:hidden;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.05);
    }
    .ytWrap iframe{
      position:absolute; inset:0;
      width:100%; height:100%;
      border:0;
    }

    footer{ margin-top:16px; color:rgba(255,255,255,.55); font-size:13px; text-align:center; }
    code{ color: rgba(255,255,255,.8); }
  </style>
</head>
<body>
  <div class="gridbg" aria-hidden="true"></div>
  <div class="float-layer" id="floatLayer" aria-hidden="true"></div>
  <div class="confetti" id="confetti" aria-hidden="true"></div>
  <div class="toast" id="toast">Listo âœ…</div>

  <div class="corner"><span class="dot"></span> L1TZX</div>

  <main class="wrap">
    <div class="badge"><span class="dot" style="width:10px;height:10px;border-radius:999px;background:linear-gradient(135deg,var(--pink),var(--cyan));"></span> Preguntas paâ€™ IG + mini juego ğŸ©´</div>
    <h1>Preguntas Mexas ğŸ˜›</h1>
    <p class="sub">Selecciona un nivel â†’ la gente escribe lo que quiera en la caja (open box). Copia y Ãºsalo en tu story.</p>

    <div class="mexico">viva mexico cabrones</div>

    <div class="tabs">
      <button class="tabbtn active" data-tab="cagado">ğŸ˜‚ Nivel bien cagado</button>
      <button class="tabbtn" data-tab="ctm">ğŸ˜ˆ Nivel â€œanda chinga tu madreâ€</button>
      <button class="tabbtn" data-tab="confiesa">ğŸ˜› Confesiones</button>
    </div>

    <section class="panel">
      <div class="toolsRow">
        <div class="mini">Tip: puedes copiar una pregunta con un clic y pegarla donde quieras.</div>
        <div style="display:flex; gap:10px; flex-wrap:wrap;">
          <button class="btn btnPrimary" id="confettiBtn">Confetti ğŸ‰</button>
          <button class="btn btnGhost" id="randomBtn">Pregunta random ğŸ²</button>
        </div>
      </div>

      <div class="qgrid" id="qgrid"></div>

      <div class="gameWrap">
        <div class="mini"><b>Mini juego:</b> Esquiva la chancla ğŸ©´ (clic dentro del cuadro para mover tu bolita)</div>

        <div class="gameHeader">
          <div class="stats">
            <div class="stat">Puntos: <b id="score">0</b></div>
            <div class="stat">RÃ©cord: <b id="best">0</b></div>
            <div class="stat">Estado: <b id="state">listo</b></div>
          </div>
          <div style="display:flex; gap:10px; flex-wrap:wrap;">
            <button class="btn btnPrimary" id="start">Iniciar â–¶</button>
            <button class="btn btnGhost" id="reset">Reiniciar âŸ²</button>
          </div>
        </div>

        <canvas id="game" width="900" height="360"></canvas>
        <div class="mini">Si te pega la chancla = perdiste ğŸ’€</div>
      </div>

      <div class="musicBox">
        <div class="musicRow">
          <div class="mini"><b>MÃºsica:</b> Grupo Frontera, Fuerza Regida â€” COQUETA</div>
          <div class="mini">Si no suena, dale play (autoplay a veces se bloquea).</div>
        </div>

        <!-- YouTube embed (no lyrics text) -->
        <div class="ytWrap">
          <!-- NOTE: Autoplay may be blocked. -->
          <iframe
            src="https://www.youtube.com/embed/5mVY3x8wz1U?autoplay=0&mute=0&controls=1&rel=0"
            title="COQUETA - Grupo Frontera, Fuerza Regida"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            allowfullscreen>
          </iframe>
        </div>
      </div>
    </section>

    <footer>
      Hecho por <b>Teddy (Felix)</b> â€” <code>L1TZX</code> ğŸ˜›
    </footer>
  </main>

<script>
  // Floating emojis
  const floatLayer = document.getElementById("floatLayer");
  const floatEmojis = ["ğŸ˜‚","ğŸ˜ˆ","ğŸ˜›","ğŸ’€","ğŸ©´","ğŸŒ®","ğŸ”¥","ğŸ’¬","ğŸ¤¡","ğŸ§ ","ğŸ§ƒ"];
  for(let i=0;i<26;i++){
    const el = document.createElement("div");
    el.className = "float";
    el.textContent = floatEmojis[Math.floor(Math.random()*floatEmojis.length)];
    el.style.left = (Math.random()*100) + "vw";
    el.style.animationDuration = (6 + Math.random()*10) + "s";
    el.style.animationDelay = (Math.random()*8) + "s";
    el.style.fontSize = (14 + Math.random()*22) + "px";
    floatLayer.appendChild(el);
  }

  // Toast
  const toast = document.getElementById("toast");
  function showToast(msg){
    toast.textContent = msg;
    toast.classList.add("show");
    setTimeout(()=>toast.classList.remove("show"), 1400);
  }

  // Confetti
  const confetti = document.getElementById("confetti");
  function confettiBoom(){
    confetti.classList.add("show");
    confetti.innerHTML = "";
    const colors = [
      "rgba(255,77,136,.95)",
      "rgba(255,127,179,.95)",
      "rgba(34,211,238,.95)",
      "rgba(139,92,246,.95)",
      "rgba(255,255,255,.85)"
    ];
    for(let i=0;i<140;i++){
      const c = document.createElement("i");
      c.style.left = (Math.random()*100) + "vw";
      c.style.background = colors[Math.floor(Math.random()*colors.length)];
      c.style.animationDuration = (1.9 + Math.random()*1.8) + "s";
      c.style.animationDelay = (Math.random()*0.15) + "s";
      confetti.appendChild(c);
    }
    setTimeout(()=>{
      confetti.classList.remove("show");
      confetti.innerHTML = "";
    }, 2400);
  }
  document.getElementById("confettiBtn").onclick = () => { confettiBoom(); showToast("Viva MÃ©xico ğŸ˜›"); };

  // Questions (your exact list)
  const DATA = {
    cagado: [
      "Â¿QuiÃ©n es el mÃ¡s castroso pero lo quieres?",
      "Â¿QuiÃ©n dice â€œahoritaâ€ y aparece en 3 dÃ­as?",
      "Â¿QuiÃ©n se hace el interesante pero contesta en 2 segundos?",
      "Â¿QuiÃ©n se rÃ­e de todo aunque ni entendiÃ³?",
      "Â¿QuiÃ©n es mÃ¡s dramÃ¡tico por cualquier cosita?",
      "Â¿QuiÃ©n es el mÃ¡s chismoso nivel tÃ­a?",
      "Â¿QuiÃ©n se pierde en su propia colonia?",
      "Â¿QuiÃ©n siempre llega tarde y todavÃ­a se enoja?",
      "Â¿QuiÃ©n es el mÃ¡s probable que diga â€œyo no fuiâ€â€¦ y sÃ­ fue?",
      "Â¿QuiÃ©n es bien mentiroso paâ€™ la peda?"
    ],
    ctm: [
      "Â¿A quiÃ©n le dirÃ­as â€œanda chinga tu madreâ€ (con cariÃ±o)?",
      "Â¿QuiÃ©n se cree mucho y no trae con quÃ©?",
      "Â¿QuiÃ©n habla un chingo y dice pura mamada?",
      "Â¿QuiÃ©n debe feria y se hace pendejo?",
      "Â¿QuiÃ©n necesita un reality check urgente?",
      "Â¿QuiÃ©n es bien doble cara pero se hace el santo?",
      "Â¿QuiÃ©n te cae bienâ€¦ pero tambiÃ©n chinga tu madre?",
      "Â¿QuiÃ©n es puro verbo y nada de acciÃ³n?",
      "Â¿QuiÃ©n es bien tÃ³xico y todavÃ­a lo niega?",
      "Â¿QuiÃ©n es el mÃ¡s probable que te deje en visto y luego pida favor?"
    ],
    confiesa: [
      "Dime un chisme pero sin nombres ğŸ˜›",
      "Confiesa algo que te dÃ© pena (nadie juzga)",
      "Â¿A quiÃ©n extraÃ±as pero te haces el fuerte?",
      "Â¿QuiÃ©n te gusta pero no te atreves?"
    ]
  };

  // Build cards
  const qgrid = document.getElementById("qgrid");
  let currentTab = "cagado";

  function makeCard(q, idx){
    const wrap = document.createElement("div");
    wrap.className = "qcard";

    const title = document.createElement("div");
    title.className = "qtitle";
    title.textContent = q;

    const ta = document.createElement("textarea");
    ta.placeholder = "Escribe aquÃ­ lo que seaâ€¦ (open box)";

    // Save draft locally so user doesnâ€™t lose it
    const key = `draft_${currentTab}_${idx}`;
    ta.value = localStorage.getItem(key) || "";
    ta.addEventListener("input", ()=> localStorage.setItem(key, ta.value));

    const actions = document.createElement("div");
    actions.className = "qactions";

    const b1 = document.createElement("button");
    b1.className = "btn btnGhost";
    b1.textContent = "Copiar pregunta";
    b1.onclick = async ()=>{
      try{
        await navigator.clipboard.writeText(q);
        showToast("Pregunta copiada ğŸ“‹");
      }catch(e){
        showToast("No se pudo copiar ğŸ˜…");
      }
    };

    const b2 = document.createElement("button");
    b2.className = "btn btnPrimary";
    b2.textContent = "Copiar mi respuesta";
    b2.onclick = async ()=>{
      const text = ta.value.trim();
      if(!text){ showToast("Primero escribe algo ğŸ˜›"); return; }
      try{
        await navigator.clipboard.writeText(text);
        showToast("Respuesta copiada âœ…");
      }catch(e){
        showToast("No se pudo copiar ğŸ˜…");
      }
    };

    const b3 = document.createElement("button");
    b3.className = "btn btnGhost";
    b3.textContent = "Limpiar";
    b3.onclick = ()=>{
      ta.value = "";
      localStorage.removeItem(key);
      showToast("Listo ğŸ§½");
    };

    actions.appendChild(b1);
    actions.appendChild(b2);
    actions.appendChild(b3);

    wrap.appendChild(title);
    wrap.appendChild(ta);
    wrap.appendChild(actions);
    return wrap;
  }

  function render(tab){
    currentTab = tab;
    qgrid.innerHTML = "";
    DATA[tab].forEach((q, i)=> qgrid.appendChild(makeCard(q, i)));
  }

  // Tabs
  document.querySelectorAll(".tabbtn").forEach(btn=>{
    btn.onclick = ()=>{
      document.querySelectorAll(".tabbtn").forEach(b=>b.classList.remove("active"));
      btn.classList.add("active");
      render(btn.dataset.tab);
      showToast("Cambiado de nivel ğŸ˜ˆ");
    };
  });

  // Random question: copy it immediately
  document.getElementById("randomBtn").onclick = async ()=>{
    const tabs = ["cagado","ctm","confiesa"];
    const tab = tabs[Math.floor(Math.random()*tabs.length)];
    const q = DATA[tab][Math.floor(Math.random()*DATA[tab].length)];
    try{
      await navigator.clipboard.writeText(q);
      showToast("Random copiado ğŸ“‹");
    }catch(e){
      showToast("No se pudo copiar ğŸ˜…");
    }
  };

  // --- Mini game: Esquiva la chancla ---
  const canvas = document.getElementById("game");
  const ctx = canvas.getContext("2d");

  let running = false;
  let score = 0;
  let best = Number(localStorage.getItem("best_chancla") || 0);
  document.getElementById("best").textContent = best;

  const player = { x: 120, y: canvas.height-70, r: 16 };
  let slippers = [];
  let spawnTimer = 0;
  let speed = 2.6;

  function resetGame(){
    running = false;
    score = 0;
    speed = 2.6;
    slippers = [];
    player.x = 120;
    document.getElementById("score").textContent = score;
    document.getElementById("state").textContent = "listo";
    draw();
  }

  function startGame(){
    if(running) return;
    running = true;
    document.getElementById("state").textContent = "jugando";
    last = performance.now();
    requestAnimationFrame(loop);
  }

  function endGame(){
    running = false;
    document.getElementById("state").textContent = "perdiste ğŸ’€";
    if(score > best){
      best = score;
      localStorage.setItem("best_chancla", String(best));
      document.getElementById("best").textContent = best;
      showToast("Nuevo rÃ©cord ğŸ”¥");
      confettiBoom();
    } else {
      showToast("Te cayÃ³ la chancla ğŸ©´ğŸ’€");
    }
  }

  function spawn(){
    const x = 60 + Math.random()*(canvas.width-120);
    slippers.push({ x, y:-20, w:34, h:18, vy: speed + Math.random()*1.8, rot: (Math.random()*2-1)*0.08 });
  }

  function collideRectCircle(rx, ry, rw, rh, cx, cy, cr){
    const nx = Math.max(rx, Math.min(cx, rx+rw));
    const ny = Math.max(ry, Math.min(cy, ry+rh));
    const dx = cx-nx, dy = cy-ny;
    return (dx*dx + dy*dy) <= cr*cr;
  }

  function draw(){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    const g = ctx.createLinearGradient(0,canvas.height-90,0,canvas.height);
    g.addColorStop(0,"rgba(255,77,136,.0)");
    g.addColorStop(1,"rgba(255,77,136,.12)");
    ctx.fillStyle = g;
    ctx.fillRect(0,canvas.height-90,canvas.width,90);

    // player
    ctx.beginPath();
    ctx.fillStyle = "rgba(34,211,238,.95)";
    ctx.arc(player.x, player.y, player.r, 0, Math.PI*2);
    ctx.fill();

    // slippers
    for(const s of slippers){
      ctx.save();
      ctx.translate(s.x, s.y);
      ctx.rotate(s.rot * (s.y/40));
      ctx.fillStyle = "rgba(255,255,255,.88)";
      ctx.fillRect(-s.w/2, -s.h/2, s.w, s.h);
      ctx.strokeStyle = "rgba(255,77,136,.9)";
      ctx.lineWidth = 3;
      ctx.beginPath();
      ctx.moveTo(-s.w/4, -s.h/2);
      ctx.lineTo(0, 0);
      ctx.lineTo(s.w/4, -s.h/2);
      ctx.stroke();
      ctx.restore();
    }

    ctx.fillStyle = "rgba(255,255,255,.55)";
    ctx.font = "14px system-ui";
    ctx.fillText("Clic dentro del cuadro para mover", 14, 22);
  }

  let last = 0;
  function loop(t){
    if(!running) return;
    const dt = Math.min(32, t-last);
    last = t;

    spawnTimer += dt;
    const interval = Math.max(280, 900 - score*10);
    if(spawnTimer > interval){
      spawnTimer = 0;
      spawn();
    }

    for(const s of slippers){
      s.y += s.vy * (dt/16);
      s.vy += 0.02 * (dt/16);
    }
    slippers = slippers.filter(s => s.y < canvas.height + 40);

    if(Math.random() < 0.06) {
      score += 1;
      document.getElementById("score").textContent = score;
      speed = 2.6 + score*0.02;
    }

    for(const s of slippers){
      const rx = s.x - s.w/2, ry = s.y - s.h/2;
      if(collideRectCircle(rx, ry, s.w, s.h, player.x, player.y, player.r)){
        endGame();
        break;
      }
    }

    draw();
    requestAnimationFrame(loop);
  }

  canvas.addEventListener("click", (e)=>{
    const rect = canvas.getBoundingClientRect();
    const x = (e.clientX - rect.left) * (canvas.width / rect.width);
    player.x = Math.max(player.r+8, Math.min(canvas.width-player.r-8, x));
  });

  document.getElementById("start").onclick = startGame;
  document.getElementById("reset").onclick = resetGame;

  // Initial
  render("cagado");
  resetGame();
</script>
</body>
</html>
